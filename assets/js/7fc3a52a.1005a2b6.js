"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2442],{6357:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>i,metadata:()=>l,toc:()=>o});var n=s(5893),c=s(1151);const i={title:"ExecuteMsg",sidebar_label:"ExecuteMsg",sidebar_position:2,slug:"/contract-api/execute-msg"},r="ExecuteMsg",l={id:"contract-api/execute-msg",title:"ExecuteMsg",description:"The ExecuteMsg is the message that is used to interact with the cw-ica-controller contract.",source:"@site/versioned_docs/version-v0.4.x/contract-api/02-execute-msg.mdx",sourceDirName:"contract-api",slug:"/contract-api/execute-msg",permalink:"/cw-ica-controller/v0.4/contract-api/execute-msg",draft:!1,unlisted:!1,editUrl:"https://github.com/srdtrk/cw-ica-controller/tree/main/docs/versioned_docs/version-v0.4.x/contract-api/02-execute-msg.mdx",tags:[],version:"v0.4.x",sidebarPosition:2,frontMatter:{title:"ExecuteMsg",sidebar_label:"ExecuteMsg",sidebar_position:2,slug:"/contract-api/execute-msg"},sidebar:"docsSidebar",previous:{title:"InstantiateMsg",permalink:"/cw-ica-controller/v0.4/contract-api/instantiate-msg"},next:{title:"QueryMsg",permalink:"/cw-ica-controller/v0.4/contract-api/query-msg"}},d={},o=[{value:"<code>CreateChannel</code>",id:"createchannel",level:2},{value:"<code>SendCosmosMsgs</code>",id:"sendcosmosmsgs",level:2},{value:"<code>messages</code>",id:"messages",level:3},{value:"<code>packet_memo</code>",id:"packet_memo",level:3},{value:"<code>timeout_seconds</code>",id:"timeout_seconds",level:3},{value:"<code>SendCustomIcaMessages</code>",id:"sendcustomicamessages",level:2},{value:"<code>UpdateCallbackAddress</code>",id:"updatecallbackaddress",level:2},{value:"<code>UpdateOwnership</code>",id:"updateownership",level:2}];function a(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,c.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h1,{id:"executemsg",children:(0,n.jsx)(t.code,{children:"ExecuteMsg"})}),"\n",(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.code,{children:"ExecuteMsg"})," is the message that is used to interact with the ",(0,n.jsx)(t.code,{children:"cw-ica-controller"})," contract.\n",(0,n.jsx)(t.strong,{children:"All execute messages are only callable by the owner of the contract."})]}),"\n",(0,n.jsx)(t.h2,{id:"createchannel",children:(0,n.jsx)(t.code,{children:"CreateChannel"})}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-rust",metastring:"reference",children:"https://github.com/srdtrk/cw-ica-controller/blob/v0.4.0/src/types/msg.rs#L27-L37\n"})}),"\n",(0,n.jsxs)(t.p,{children:["This message is used to initiate an ICS-27 channel open handshake. It is only callable by the owner.\nThis message only takes one optional parameter: ",(0,n.jsx)(t.code,{children:"channel_open_init_options"}),"."]}),"\n",(0,n.jsxs)(t.p,{children:["If this parameter is left empty, then the contract will use the ",(0,n.jsx)(t.code,{children:"channel_open_init_options"})," that were last\npassed to the ",(0,n.jsx)(t.code,{children:"InstantiateMsg"})," or ",(0,n.jsx)(t.code,{children:"CreateChannel"})," messages."]}),"\n",(0,n.jsxs)(t.p,{children:["If this parameter is set, then the contract will use the ",(0,n.jsx)(t.code,{children:"channel_open_init_options"})," that are passed to this\nmessage and save them for future ",(0,n.jsx)(t.code,{children:"CreateChannel"})," messages."]}),"\n",(0,n.jsx)(t.h2,{id:"sendcosmosmsgs",children:(0,n.jsx)(t.code,{children:"SendCosmosMsgs"})}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-rust",metastring:"reference",children:"https://github.com/srdtrk/cw-ica-controller/blob/v0.4.0/src/types/msg.rs#L38-L52\n"})}),"\n",(0,n.jsxs)(t.p,{children:["Once an ICS-27 channel open handshake is complete, the owner can control the interchain account on the counterparty\nchain. To give the owner a familiar interface, this message allows the owner to take actions with the interchain\naccount using ",(0,n.jsx)(t.code,{children:"CosmosMsg"}),"s. This is the recommended way to use the interchain account. We will go over the fields of\nthis message in detail."]}),"\n",(0,n.jsx)(t.h3,{id:"messages",children:(0,n.jsx)(t.code,{children:"messages"})}),"\n",(0,n.jsxs)(t.p,{children:["This is a list of ",(0,n.jsx)(t.code,{children:"CosmosMsg"}),"s that the contract will execute on the counterparty chain using the interchain account.\nThis execution is atomic. If any of the ",(0,n.jsx)(t.code,{children:"CosmosMsg"}),"s fail, then the entire execution will fail."]}),"\n",(0,n.jsxs)(t.admonition,{type:"note",children:[(0,n.jsxs)(t.p,{children:["All applicable ",(0,n.jsx)(t.code,{children:"CosmosMsg"}),"s are supported if the channel was opened with ",(0,n.jsx)(t.code,{children:"tx_encoding"})," set to ",(0,n.jsx)(t.code,{children:"proto3"}),".\nHowever, if the channel was opened with ",(0,n.jsx)(t.code,{children:"tx_encoding"})," set to ",(0,n.jsx)(t.code,{children:"proto3json"}),", then some ",(0,n.jsx)(t.code,{children:"CosmosMsg"}),"s are not supported.\nBelow is a table of the supported ",(0,n.jsx)(t.code,{children:"CosmosMsg"}),"s for each ",(0,n.jsx)(t.code,{children:"tx_encoding"}),"."]}),(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{style:{textAlign:"center"},children:(0,n.jsx)(t.strong,{children:"CosmosMsg"})}),(0,n.jsx)(t.th,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"proto3"})}),(0,n.jsx)(t.th,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"proto3json"})})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"Stargate"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"\u2705"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"\u274c"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"BankMsg::Send"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"\u2705"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"\u2705"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"BankMsg::Burn"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"\u274c"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"\u274c"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"IbcMsg::Transfer"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"\u2705"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"\ud83d\udfe2"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"IbcMsg::SendPacket"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"N/A"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"N/A"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"IbcMsg::CloseChannel"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"N/A"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"N/A"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"WasmMsg::*"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"\u2705"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"\u274c"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"GovMsg::*"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"\u2705"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"\u2705"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"StakingMsg::Delegate"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"\u2705"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"\u2705"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"StakingMsg::*"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"\ud83d\udfe2"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"\ud83d\udfe2"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"DistributionMsg::WithdrawDelegatorReward"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"\ud83d\udfe2"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"\ud83d\udfe2"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"DistributionMsg::*"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"\u2705"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"\u2705"})]})]})]}),(0,n.jsxs)(t.p,{children:["Note that ",(0,n.jsx)(t.code,{children:"\ud83d\udfe2"})," means that the ",(0,n.jsx)(t.code,{children:"CosmosMsg"})," is supported but not tested in the contract's test suite.\nThese will be tested in the future."]})]}),"\n",(0,n.jsx)(t.h3,{id:"packet_memo",children:(0,n.jsx)(t.code,{children:"packet_memo"})}),"\n",(0,n.jsxs)(t.p,{children:["This is the IBC packet memo that will be included in the ICS-27 packet. It is optional and defaults to ",(0,n.jsx)(t.code,{children:'""'}),".\nAdditionally, the memo field is used by some IBC middleware to execute custom logic on the counterparty chain.\nBut most of these middlewares do not yet support ICS-27 channels."]}),"\n",(0,n.jsx)(t.h3,{id:"timeout_seconds",children:(0,n.jsx)(t.code,{children:"timeout_seconds"})}),"\n",(0,n.jsxs)(t.p,{children:["This is the timeout in seconds that will be used for the ICS-27 packet. It is optional and defaults to ",(0,n.jsx)(t.a,{href:"https://github.com/srdtrk/cw-ica-controller/blob/v0.4.0/src/ibc/types/packet.rs#L15-L16",children:(0,n.jsx)(t.code,{children:"DEFAULT_TIMEOUT_SECONDS"})}),"."]}),"\n",(0,n.jsx)(t.h2,{id:"sendcustomicamessages",children:(0,n.jsx)(t.code,{children:"SendCustomIcaMessages"})}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-rust",metastring:"reference",children:"https://github.com/srdtrk/cw-ica-controller/blob/v0.4.0/src/types/msg.rs#L53-L89\n"})}),"\n",(0,n.jsxs)(t.p,{children:["Recall that the ",(0,n.jsx)(t.code,{children:"SendCosmosMsgs"})," message is the recommended way to use the interchain account. Use this only if you\ninsist on using ",(0,n.jsx)(t.code,{children:"proto3json"})," encoding and you need to send messages that are not supported by the ",(0,n.jsx)(t.code,{children:"SendCosmosMsgs"}),"."]}),"\n",(0,n.jsx)(t.admonition,{type:"note",children:(0,n.jsxs)(t.p,{children:["This message is redundant if the channel was opened with ",(0,n.jsx)(t.code,{children:"tx_encoding"})," set to ",(0,n.jsx)(t.code,{children:"proto3"}),". This is because any custom\nmessage you might want to send will be supported through ",(0,n.jsx)(t.code,{children:"CosmosMsg::Stargate"}),"."]})}),"\n",(0,n.jsx)(t.p,{children:"I will not go into the details of the fields of this message since it is not recommended to use this message."}),"\n",(0,n.jsx)(t.h2,{id:"updatecallbackaddress",children:(0,n.jsx)(t.code,{children:"UpdateCallbackAddress"})}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-rust",metastring:"reference",children:"https://github.com/srdtrk/cw-ica-controller/blob/v0.4.0/src/types/msg.rs#L90-L95\n"})}),"\n",(0,n.jsxs)(t.p,{children:["This message is used to update the contract address that this contract will send callbacks to.\nThis is useful if the owner wants to change the contract that receives the callbacks.\nIf set to ",(0,n.jsx)(t.code,{children:"None"}),", then no callbacks will be sent."]}),"\n",(0,n.jsx)(t.h2,{id:"updateownership",children:(0,n.jsx)(t.code,{children:"UpdateOwnership"})}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-rust",metastring:"reference",children:"https://github.com/larry0x/cw-plus-plus/blob/ownable-v0.5.0/packages/ownable/derive/src/lib.rs#L86-L90\n"})}),"\n",(0,n.jsxs)(t.p,{children:["This message type is provided by the ",(0,n.jsx)(t.a,{href:"https://crates.io/crates/cw-ownable",children:"cw-ownable"})," crate. It wraps a\n",(0,n.jsx)(t.code,{children:"cw_ownable::Action"})," enum."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-rust",metastring:"reference",children:"https://github.com/larry0x/cw-plus-plus/blob/ownable-v0.5.0/packages/ownable/src/lib.rs#L31-L57\n"})}),"\n",(0,n.jsxs)(t.p,{children:["The owner can propose to transfer the ownership of the contract to a new address using ",(0,n.jsx)(t.code,{children:"Action::TransferOwnership"})," and\nset and expiry time for the proposal. If the proposal is accepted before the expiry time through\n",(0,n.jsx)(t.code,{children:"Action::AcceptOwnership"}),", then the ownership of the contract is transferred to the new address."]}),"\n",(0,n.jsxs)(t.p,{children:["You can learn more about ",(0,n.jsx)(t.code,{children:"cw-ownable"})," in its crate documentation."]})]})}function h(e={}){const{wrapper:t}={...(0,c.a)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(a,{...e})}):a(e)}},1151:(e,t,s)=>{s.d(t,{Z:()=>l,a:()=>r});var n=s(7294);const c={},i=n.createContext(c);function r(e){const t=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:r(e.components),n.createElement(i.Provider,{value:t},e.children)}}}]);